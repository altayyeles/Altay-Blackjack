/* =========================================================
   Altay BlackJack - style.css
   Varsayılan tema: LIGHT, DARK opsiyonel (data-theme="dark")
   - Yeşil "felt" masa görünümü
   - Modern, responsive UI (mobil/desktop)
   - Erişilebilirlik: focus-visible, reduced motion
   ========================================================= */

/* -------------------- Temel Değişkenler -------------------- */
:root {
  /* Light (DEFAULT) */
  --bg: #f9fbff;
  --fg: #0c1424;
  --muted: #51607a;
  --accent: #ff8c2b;

  /* Masa keçesi tonları */
  --felt-outer: #0a5d2c;
  --felt-inner: #0f7c3a;
  --table-edge: #154c29;

  /* UI renkleri */
  --btn-bg: #1b2538;
  --btn-fg: #ffffff;
  --btn-primary-start: #7859f0;
  --btn-primary-end: #2cb5e8;
  --border-soft: rgba(0, 0, 0, 0.06);
  --ring: #5b9cff;
}

:root[data-theme="dark"] {
  --bg: #0b1020;
  --fg: #eaf1ff;
  --muted: #9db2ce;
  --accent: #ffd54a;

  --felt-outer: #064020;
  --felt-inner: #0a6a34;
  --table-edge: #0b3a20;

  --btn-bg: #1a2233;
  --btn-fg: #eaf1ff;
  --border-soft: rgba(255, 255, 255, 0.08);
  --ring: #77b4ff;
}

/* -------------------- Genel Reset / Temel -------------------- */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--fg);
  background: var(--bg);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

img, svg, video { display: block; max-width: 100%; }

/* Metin seçimi */
::selection { background: rgba(123, 97, 255, 0.25); color: inherit; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

/* -------------------- Üst Çubuk -------------------- */
.topbar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 16px;
  border-bottom: 1px solid var(--border-soft);
  backdrop-filter: saturate(140%) blur(4px);
}

.brand {
  font-size: 1.15rem;
}

.actions {
  margin-left: auto;
  display: flex;
  gap: 10px;
}

/* -------------------- Butonlar & Link Butonlar -------------------- */
button, .btn, input[type="button"], input[type="submit"] {
  appearance: none;
  border: 0;
  cursor: pointer;
  border-radius: 10px;
  padding: 8px 12px;
  background: var(--btn-bg);
  color: var(--btn-fg);
  line-height: 1.1;
  transition: transform .08s ease, box-shadow .12s ease, background .2s ease;
}

.btn.primary, button.primary {
  background: linear-gradient(135deg, var(--btn-primary-start), var(--btn-primary-end));
  color: #fff;
}

button:active, .btn:active { transform: translateY(1px); }

button:focus-visible, .btn:focus-visible, input:focus-visible, select:focus-visible {
  outline: 0;
  box-shadow: 0 0 0 3px var(--ring);
}

/* -------------------- Form Elemanları -------------------- */
input, select {
  border: 1px solid var(--border-soft);
  background: #fff;
  color: var(--fg);
  border-radius: 8px;
  padding: 8px 10px;
}
:root[data-theme="dark"] input,
:root[data-theme="dark"] select {
  background: #0e172a;
  color: var(--fg);
  border-color: rgba(255,255,255,.12);
}

input[type="number"] { width: 92px; }

/* -------------------- Masa (FELT) -------------------- */
.table {
  max-width: 1080px;
  margin: 24px auto;
  padding: 22px;
  border-radius: 18px;
  position: relative;

  /* Keçe: merkezden dışa koyulaşan degrade */
  background:
    radial-gradient(ellipse at center,
      var(--felt-inner) 0%,
      var(--felt-inner) 55%,
      var(--felt-outer) 100%);

  box-shadow:
    inset 0 0 0 2px rgba(255,255,255,0.04),
    0 18px 40px rgba(0,0,0,0.35);
  border: 6px solid var(--table-edge);
}

/* Başlıklar */
.dealer-area h2, .player-area h2 {
  margin: 6px 0 8px;
  font-weight: 700;
  letter-spacing: .2px;
}

/* Kart alanı */
.cards {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  min-height: 160px;
  perspective: 900px;
}

/* Kart boyutu: responsive clamp */
.card {
  width: clamp(72px, 9.5vw, 110px);
  aspect-ratio: 5 / 7;           /* yaklaşık kart oranı */
  border-radius: 12px;
  background: #fff;
  background-image: var(--img);
  background-size: cover;
  background-position: center;
  box-shadow: 0 10px 28px rgba(0,0,0,.22);
  transform: translateY(-16px) rotateX(6deg);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
}

.card.back {
  /* Kart arka yüzü: masa ile uyumlu yeşil desen */
  background-image:
    radial-gradient(circle at 20% 20%, rgba(255,255,255,0.08) 0 10%, transparent 11%),
    radial-gradient(circle at 80% 80%, rgba(0,0,0,0.06) 0 10%, transparent 11%),
    linear-gradient(135deg, #0e6e34, #138b45);
  border: 1px solid rgba(255,255,255,0.14);
}

/* Dağıtım animasyonu */
.card.deal-in { animation: deal .22s ease-out; }
@keyframes deal {
  from { transform: translate(-120px, -80px) rotate(-12deg); opacity: 0; }
  to   { transform: translateY(-16px) rotateX(6deg); opacity: 1; }
}

/* El toplamı */
.hand-total {
  margin-top: 6px;
  font: 600 1.1rem/1.2 ui-sans-serif;
  color: var(--accent);
}

/* -------------------- Kontroller -------------------- */
.controls { display: grid; gap: 12px; margin-top: 14px; }

.chips, .play-buttons, .side-bets {
  display: flex; flex-wrap: wrap; align-items: center; gap: 10px;
}

/* Chip butonları */
.chip {
  background: #0f172a;
  color: #fff;
  border-radius: 999px;
  padding: 7px 12px;
  box-shadow: inset 0 -2px 0 rgba(255,255,255,.06);
}
:root[data-theme="dark"] .chip { background: #0b1222; }

.balance { margin-left: auto; color: var(--muted); font-weight: 600; }

/* Yan bahis etiketleri */
.side-bets label { display: inline-flex; align-items: center; gap: 8px; }

/* Oyun durum metinleri */
.status { color: var(--muted); margin-top: 8px; }
.advice { color: #2f7ae5; margin-top: 6px; }

/* -------------------- Dialog (Ayarlar) -------------------- */
dialog {
  border: 1px solid var(--border-soft);
  border-radius: 12px;
  background: #ffffff;
  color: #111827;
  width: min(720px, 94vw);
  padding: 12px 16px 16px;
}
:root[data-theme="dark"] dialog {
  background: #0e1626;
  color: var(--fg);
  border-color: rgba(255,255,255,.12);
}
dialog::backdrop { background: rgba(0,0,0,.45); }

dialog h3 { margin: 6px 2px 10px; }
dialog fieldset {
  border: 1px dashed var(--border-soft);
  border-radius: 10px;
  padding: 10px;
  margin-bottom: 10px;
}
dialog legend { padding: 0 6px; color: var(--muted); }
dialog menu { display: flex; gap: 8px; justify-content: flex-end; margin: 0; }

/* -------------------- History Tablosu -------------------- */
.history { padding: 12px 16px 24px; }
table { width: 100%; border-collapse: collapse; }
th, td {
  text-align: left;
  padding: 10px 12px;
  border-bottom: 1px solid var(--border-soft);
  font-size: 0.95rem;
}
thead th { font-weight: 700; color: var(--muted); }
tbody tr:nth-child(even) { background: rgba(255,255,255,.35); }
:root[data-theme="dark"] tbody tr:nth-child(even) { background: rgba(255,255,255,.04); }

/* -------------------- Yardımcı Sınıflar -------------------- */
.hidden { display: none !important; }

/* -------------------- Responsive -------------------- */
@media (max-width: 920px) {
  .table { margin: 16px 12px; padding: 16px; }
}

@media (max-width: 720px) {
  .topbar { flex-wrap: wrap; gap: 8px; }
  .actions { width: 100%; justify-content: flex-end; }
  .cards { gap: 10px; min-height: 132px; }
  .card { width: clamp(64px, 22vw, 96px); }
  input[type="number"] { width: 84px; }
}

/* -------------------- Küçük Görsel İyileştirmeler -------------------- */
a.btn { text-decoration: none; display: inline-flex; align-items: center; gap: 6px; }
a.btn:hover, button:hover { filter: brightness(1.04); }
a.btn:active { transform: translateY(1px) scale(0.98); }
